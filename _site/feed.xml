<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.6.2">Jekyll</generator><link href="http://localhost:4000/switchBoard/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/switchBoard/" rel="alternate" type="text/html" /><updated>2018-01-10T19:19:55-08:00</updated><id>http://localhost:4000/switchBoard/</id><title type="html">SwitchBoard Home Automation</title><subtitle>Node.js home automation system with machine learning</subtitle><entry><title type="html">The Training Wheels Are Off!</title><link href="http://localhost:4000/switchBoard/The-Training-Wheels-Are-Off!/" rel="alternate" type="text/html" title="The Training Wheels Are Off!" /><published>2018-01-10T00:00:00-08:00</published><updated>2018-01-10T00:00:00-08:00</updated><id>http://localhost:4000/switchBoard/The%20Training%20Wheels%20Are%20Off!</id><content type="html" xml:base="http://localhost:4000/switchBoard/The-Training-Wheels-Are-Off!/">&lt;p&gt;I had &lt;a href=&quot;https://imbrianj.github.io/switchBoard/Machine-(Slowly)-Learning/&quot;&gt;posted before&lt;/a&gt; about the Machine Learning incorporated into SwitchBoard.  At that time, I was still collecting data and wasn’t able to fully test every part of the functionality.  I now have that data.&lt;/p&gt;

&lt;p&gt;I’ve been making improvements to the Machine Learning - slight tweaks to how events are recorded and changes to the logic in how different events are considered.&lt;/p&gt;

&lt;p&gt;One change to database records was the use of milliseconds instead of seconds.  While this will inflate data storage a bit, it makes a common baseline that can more intuitively be used throughout the codebase as this is natively acquired via &lt;code class=&quot;highlighter-rouge&quot;&gt;new Date.getTime()&lt;/code&gt;.  If you have a bunch of recorded events and would like to update it to the new format, let me know and I can post it.  It’ll just run through all recorded time values and multiply them by 1000.  Worth noting: there is no current loss of functionality if you do not migrate.  Most all of the time records are done for features that have not yet been implemented.&lt;/p&gt;

&lt;p&gt;Once the major bugs had been ironed out, I found the actions taken by SwitchBoard to be few, but not incorrect.  It has potential to be helpful, but I am still not convinced it will grow to be anything more than a novelty.  I will continue to tweak the parameters and build packages once I find something that’s as usable as possible.&lt;/p&gt;

&lt;p&gt;Some interesting observations I’ve seen are actions taken that were unexpected.  I was notified that “Because of subdevice-state-temp-Office-68, I’m 83% sure you want the Living Room Switch off”.  While I didn’t even notice that the Living Room Switch was turned off (meaning it was valuable in saving that electricity) - it was an unexpected relationship that the office temperature was 68° and it thought that was related to the Living Room Switch at all - it is likelier chalked up to dumb luck than any profound insights gained.  Regardless, it’s interesting to see it behave - and if it ever does misbehave, it’s simple enough to correct it.  By simply countering whatever action it had committed within the (configurable) one minute grace period, it will automatically reinforce the desired behaviors.&lt;/p&gt;

&lt;p&gt;I’ve added a ton more logging data, so you should be able to at least get an idea of why certain actions are or are not taken.  You may see messages in the log like:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;AI: Ignoring Living Room Lamp since it recently changed state.
AI: Already set, but 97% confident Closet Lamp should be off.
AI: Only 66% confident Humidifier should be off.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This illustrates some of the five special conditions that the machine learning can derive:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;It’s a desired action.  Execute on it.&lt;/li&gt;
  &lt;li&gt;It’s a desired action.  But the current state matches the desired state, so there’s nothing to be done.  Ignore it.&lt;/li&gt;
  &lt;li&gt;It may or may not be a desired action - the device has undergone a change within a certain amount of (configurable) time.  Ignore it.  If you and your house have a disagreement as to what is a desirable state of any devices, this is the tie-breaker.  If you say “I want this lamp off”, SwitchBoard cannot immediately disagree and turn it back on.&lt;/li&gt;
  &lt;li&gt;It is not a desired action as the confidence level has not surpassed the configurable threshold.  Ignore it.&lt;/li&gt;
  &lt;li&gt;It’s a read-only device (such as a motion sensor, temperature sensor) - so no action can be done to the device.  Ignore it.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This solution is, admittedly, very simplistic.  It’s a simple hash table of single events, mapped to many device states.  For a real breakthrough, I think compound conditions will need to be done.  If a motion sensor goes off AND my presence sensor is not active, the outcome could be very different than if I were home.  I’m trying to keep things simple for now, allowing me to change things quickly and not being overly committed into something overwhelming.&lt;/p&gt;</content><author><name></name></author><category term="general" /><category term="device" /><category term="machine learning" /><category term="home automation" /><category term="gerty" /><summary type="html">I had posted before about the Machine Learning incorporated into SwitchBoard. At that time, I was still collecting data and wasn’t able to fully test every part of the functionality. I now have that data.</summary></entry><entry><title type="html">Enabling Voice Commands On Android</title><link href="http://localhost:4000/switchBoard/Enabling-Voice-Commands-On-Android/" rel="alternate" type="text/html" title="Enabling Voice Commands On Android" /><published>2018-01-08T00:00:00-08:00</published><updated>2018-01-08T00:00:00-08:00</updated><id>http://localhost:4000/switchBoard/Enabling%20Voice%20Commands%20On%20Android</id><content type="html" xml:base="http://localhost:4000/switchBoard/Enabling-Voice-Commands-On-Android/">&lt;p&gt;I’m not a big fan of “always on” smart speakers such as Google Home, Alexa, etc.  To me, it’s just too creepy to have a speaker closely tied to the Internet, built by companies with a vested interest in knowing more about you that’s always on and listening.  If you’re paranoid like me, here are some steps to get on-demand (ie: requiring a button press) voice recognition on your smart phone that will work with SwitchBoard.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;You’ll need &lt;a href=&quot;https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm&quot;&gt;Tasker for Android&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Open Tasker and go to the “Tasks” tab.&lt;/li&gt;
  &lt;li&gt;Click the “+” in the bottom right to create a new task.  Enter “Voice” (or something) as the name.&lt;/li&gt;
  &lt;li&gt;Inside the “Voice” task, click the “+” to create a new &lt;code class=&quot;highlighter-rouge&quot;&gt;Action&lt;/code&gt;.
&lt;span class=&quot;images&quot;&gt;
  &lt;a href=&quot;/switchBoard/images/voice/selectAction.png&quot;&gt;&lt;img src=&quot;/switchBoard/images/voice/selectAction.png&quot; alt=&quot;List of all Action Categories&quot; title=&quot;List of all Action Categories&quot; /&gt;&lt;/a&gt;
&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;Click &lt;code class=&quot;highlighter-rouge&quot;&gt;Input&lt;/code&gt;, then &lt;code class=&quot;highlighter-rouge&quot;&gt;Get Voice&lt;/code&gt;.  You can leave the settings for &lt;code class=&quot;highlighter-rouge&quot;&gt;Get Voice&lt;/code&gt; default.
&lt;span class=&quot;images&quot;&gt;
  &lt;a href=&quot;/switchBoard/images/voice/inputActions.png&quot;&gt;&lt;img src=&quot;/switchBoard/images/voice/inputActions.png&quot; alt=&quot;Creating a new &amp;quot;Get Voice&amp;quot; Action&quot; title=&quot;Creating a new &amp;quot;Get Voice&amp;quot; Action&quot; /&gt;&lt;/a&gt;
  &lt;a href=&quot;/switchBoard/images/voice/voiceConfig.png&quot;&gt;&lt;img src=&quot;/switchBoard/images/voice/voiceConfig.png&quot; alt=&quot;My settings for Get Voice Action&quot; title=&quot;My settings for Get Voice Action&quot; /&gt;&lt;/a&gt;
&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;Go back to the “Voice” task and click the “+” again to create another new &lt;code class=&quot;highlighter-rouge&quot;&gt;Action&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;This time, click &lt;code class=&quot;highlighter-rouge&quot;&gt;Net&lt;/code&gt;, then &lt;code class=&quot;highlighter-rouge&quot;&gt;HTTP Get&lt;/code&gt;.
&lt;span class=&quot;images&quot;&gt;
  &lt;a href=&quot;/switchBoard/images/voice/networkActions.png&quot;&gt;&lt;img src=&quot;/switchBoard/images/voice/networkActions.png&quot; alt=&quot;Creating a new &amp;quot;HTTP GET&amp;quot; Action&quot; title=&quot;Creating a new &amp;quot;HTTP GET&amp;quot; Action&quot; /&gt;&lt;/a&gt;
&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;Inside the settings for the network action, specify your &lt;code class=&quot;highlighter-rouge&quot;&gt;Server:Port&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;For the &lt;code class=&quot;highlighter-rouge&quot;&gt;Path&lt;/code&gt;, enter: &lt;code class=&quot;highlighter-rouge&quot;&gt;?gerty=text-%VOICE&lt;/code&gt;.  Note, if you’ve changed Gerty’s deviceId from the default in SwitchBoard, change that here to match.
&lt;span class=&quot;images&quot;&gt;
  &lt;a href=&quot;/switchBoard/images/voice/networkConfig.png&quot;&gt;&lt;img src=&quot;/switchBoard/images/voice/networkConfig.png&quot; alt=&quot;My settings for HTTP GET Action&quot; title=&quot;My settings for HTTP GET Action&quot; /&gt;&lt;/a&gt;
&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;In the main “Voice” task page, you’ll see an icon in the bottom center.  Clicking this allows you to associate an icon.  I had chosen &lt;code class=&quot;highlighter-rouge&quot;&gt;Material&lt;/code&gt; and searched &lt;code class=&quot;highlighter-rouge&quot;&gt;Voice&lt;/code&gt;.
&lt;span class=&quot;images&quot;&gt;
  &lt;a href=&quot;/switchBoard/images/voice/iconChooser.png&quot;&gt;&lt;img src=&quot;/switchBoard/images/voice/iconChooser.png&quot; alt=&quot;Searching for &amp;quot;Voice&amp;quot; within the Material icon list&quot; title=&quot;Searching for &amp;quot;Voice&amp;quot; within the Material icon list&quot; /&gt;&lt;/a&gt;
  &lt;a href=&quot;/switchBoard/images/voice/taskView.png&quot;&gt;&lt;img src=&quot;/switchBoard/images/voice/taskView.png&quot; alt=&quot;View of completed Task&quot; title=&quot;View of completed Task&quot; /&gt;&lt;/a&gt;
&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;Back at the home screen of your phone, long press on an empty space.  When the menu pops up, selected &lt;code class=&quot;highlighter-rouge&quot;&gt;Widgets&lt;/code&gt;.  Scroll down to &lt;code class=&quot;highlighter-rouge&quot;&gt;Tasker&lt;/code&gt; and hold the &lt;code class=&quot;highlighter-rouge&quot;&gt;Task&lt;/code&gt; icon and drag it to your home screen.&lt;/li&gt;
  &lt;li&gt;In the &lt;code class=&quot;highlighter-rouge&quot;&gt;Task Selection&lt;/code&gt;, choose your new “Voice” task.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;You should now have an icon on your home screen allowing you to quickly fire voice commands to SwitchBoard.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;images&quot;&gt;
  &lt;a href=&quot;/switchBoard/images/voice/voiceInput.png&quot;&gt;&lt;img src=&quot;/switchBoard/images/voice/voiceInput.png&quot; alt=&quot;Example of using Get Voice from a desktop icon&quot; title=&quot;Example of using Get Voice from a desktop icon&quot; /&gt;&lt;/a&gt;
&lt;/span&gt;&lt;/p&gt;</content><author><name></name></author><category term="general" /><category term="howto" /><category term="home automation" /><category term="gerty" /><category term="voice" /><category term="android" /><summary type="html">I’m not a big fan of “always on” smart speakers such as Google Home, Alexa, etc. To me, it’s just too creepy to have a speaker closely tied to the Internet, built by companies with a vested interest in knowing more about you that’s always on and listening. If you’re paranoid like me, here are some steps to get on-demand (ie: requiring a button press) voice recognition on your smart phone that will work with SwitchBoard.</summary></entry><entry><title type="html">So, What About Privacy?</title><link href="http://localhost:4000/switchBoard/So,-What-About-Privacy/" rel="alternate" type="text/html" title="So, What About Privacy?" /><published>2018-01-03T00:00:00-08:00</published><updated>2018-01-03T00:00:00-08:00</updated><id>http://localhost:4000/switchBoard/So,%20What%20About%20Privacy</id><content type="html" xml:base="http://localhost:4000/switchBoard/So,-What-About-Privacy/">&lt;p&gt;A big reason I build SwitchBoard is so I can do things the way I think they should be done.  I like having my data be within my walls as much as possible.  For external APIs, you often have little choice in rely on those outside data points, but if they’re varied, you at least lessen your exposure.  My personal setup consumes a decent number of APIs and no single one has any real useful bits - they’re tied together and the logic to act upon them remains within my network.  Maybe I’m paranoid, but that seems like a good default starting place when building something that deals with so much personal information.&lt;/p&gt;

&lt;h3 id=&quot;so-what-is-switchboard-doing-about-privacy&quot;&gt;So, what is SwitchBoard doing about privacy?&lt;/h3&gt;

&lt;p&gt;For one, I have no clue how many people use it.  I may be the only one.  For my development decisions, this seems like the safest assumption as it gives me the most leeway to build it how I think it should be built.  I don’t use any tracking metrics aside from those that are unavoidable (Github Insights, NPM downloads, etc).  This blog doesn’t use Google Analytics.  Tracking creeps me out.&lt;/p&gt;

&lt;p&gt;It would be really helpful if I had functionality that, when an instance of SwitchBoard is installed, it would send data to me letting me know it was installed and with which devices, so I could focus efforts.  But that would go against a big part of why I started the project.  So I don’t.  If there’s a crash, it’s not reported to me.  I depend on people reporting issues to me.  It’s possible that, in the future, I may create an &lt;em&gt;opt-in&lt;/em&gt; special pseudo-device to allow users to send me some usage data, but it’t not currently planned.&lt;/p&gt;

&lt;p&gt;SwitchBoard, how I have it configured, logs a whole lot of data.  To aid in the machine learning, it builds up an index of patterns it can then act upon.  These are all A) completely optional and opt-in and B) held entirely locally.  Nothing is shared with the cloud or external parties that you have not opted into during the configuration process.  This also means that any “seed” files - like those that were popular with JS frameworks are a no-go.&lt;/p&gt;

&lt;p&gt;There are very few dependencies that are required to run SwitchBoard.  This mitigates unnecessary complication (in my opinion), exposure to external code vulnerabilities and keep SwitchBoard more aligned with the isolated anti-walled garden.  It’s generic JavaScript - use it as you please.&lt;/p&gt;

&lt;p&gt;Security and privacy have a fair bit of overlap.  Any APIs that support it, use SSL.  No credentials are sent to clients (except for Foscam - which is, unfortunately, required).&lt;/p&gt;

&lt;h3 id=&quot;what-is-switchboard-not-doing-about-privacy&quot;&gt;What is SwitchBoard not doing about privacy?&lt;/h3&gt;

&lt;p&gt;A huge part of the built in security depends on SwitchBoard being within a trusted network.  You should not poke holes in your firewall to expose SwitchBoard as that will circumvent that security it depends on.  If you are not within a trusted network, you open yourself up to allowing anyone within that network to have control of your devices.  For most home automation systems - where a single domicile is paired with a single home network - this seemed like a reasonable assumption to make.  If, however, this does not suit your needs, reach out and I can see about other possible solutions.&lt;/p&gt;

&lt;p&gt;Credentials are stored unencrypted on the server.  Those credentials are never shared to clients and only accessible via shell / ftp / local access - and via the device’s encrypted HTTPS commands.  While not ideal, it removes considerable overhead and complication that I personally feel is not of any real benefit to most users.  If you fear that someone may have access to your files on the server on which SwitchBoard is running, your config file will have passwords and personal information and will be at risk.&lt;/p&gt;

&lt;p&gt;With the assumption of the “single domicile is paired with a single home network” and automation system, there is no password protection or internal obfuscation.  I have not personally found the use case in which a person may be trusted to be on your network but should not be trusted to, say, adjust the thermostat or turn off lights.  If user settings or even generic password are something people are interested in, I can also look into that.&lt;/p&gt;

&lt;p&gt;In the end, it is your data and you should have a say in how it’s transmitted, kept and stored.  You also deserve a candid and plain-text description of how your data is used and what risks it might be at.  If storage or transmission of personal data is not critical to the function of the product, it should be seen as a liability and avoided at all cost.  When it comes to machine learning of personal behaviors and the granularity in which it’s able to be tracked, this sentiment is only heightened.&lt;/p&gt;</content><author><name></name></author><category term="general" /><category term="home automation" /><category term="privacy" /><summary type="html">A big reason I build SwitchBoard is so I can do things the way I think they should be done. I like having my data be within my walls as much as possible. For external APIs, you often have little choice in rely on those outside data points, but if they’re varied, you at least lessen your exposure. My personal setup consumes a decent number of APIs and no single one has any real useful bits - they’re tied together and the logic to act upon them remains within my network. Maybe I’m paranoid, but that seems like a good default starting place when building something that deals with so much personal information.</summary></entry><entry><title type="html">Help! Help?</title><link href="http://localhost:4000/switchBoard/Help-Help!/" rel="alternate" type="text/html" title="Help!  Help?" /><published>2017-12-20T00:00:00-08:00</published><updated>2017-12-20T00:00:00-08:00</updated><id>http://localhost:4000/switchBoard/Help?%20Help!</id><content type="html" xml:base="http://localhost:4000/switchBoard/Help-Help!/">&lt;h3 id=&quot;i-need-help&quot;&gt;I Need Help!&lt;/h3&gt;
&lt;p&gt;Having trouble getting SwitchBoard set up?  Are you just interested in asking some questions to know if it’ll fit your needs?  Maybe you only care about part of the code and want to repurpose it for some other project - or just have some general home automation questions totally unrelated to this code.  Regardless, I’m happy to help as much as I’m able.  The best places to reach out are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;File a &lt;a href=&quot;https://github.com/imbrianj/switchBoard/issues/new&quot;&gt;Git Issue&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Send an email to &lt;a href=&quot;mailto:brian@bevey.org&quot;&gt;brian@bevey.org&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Join the &lt;a href=&quot;https://webchat.freenode.net/?channels=#%23switchboard&quot;&gt;IRC Channel&lt;/a&gt; or use the chat embedded below.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;how-can-i-help&quot;&gt;How Can I Help?&lt;/h3&gt;
&lt;p&gt;You can reach out with the same contact methods above.  If you have a device you’d like to add, are able to help test / write code, have a device you’d like to send me (even if it’s just a loan), translation, design feedback - all are welcome!&lt;/p&gt;

&lt;h3 id=&quot;irc-channel&quot;&gt;IRC Channel&lt;/h3&gt;
&lt;iframe src=&quot;https://webchat.freenode.net/?channels=#%23switchboard&quot; height=&quot;500&quot; width=&quot;800&quot; style=&quot;width:100%; height: 500px;&quot;&gt;&lt;/iframe&gt;</content><author><name></name></author><category term="general" /><category term="home automation" /><summary type="html">I Need Help! Having trouble getting SwitchBoard set up? Are you just interested in asking some questions to know if it’ll fit your needs? Maybe you only care about part of the code and want to repurpose it for some other project - or just have some general home automation questions totally unrelated to this code. Regardless, I’m happy to help as much as I’m able. The best places to reach out are:</summary></entry><entry><title type="html">A Look At Things To Come</title><link href="http://localhost:4000/switchBoard/A-Look-At-Things-To-Come/" rel="alternate" type="text/html" title="A Look At Things To Come" /><published>2017-12-18T00:00:00-08:00</published><updated>2017-12-18T00:00:00-08:00</updated><id>http://localhost:4000/switchBoard/A%20Look%20At%20Things%20To%20Come</id><content type="html" xml:base="http://localhost:4000/switchBoard/A-Look-At-Things-To-Come/">&lt;p&gt;I’ve been trying to keep updating SwitchBoard with features and bug fixes.  There are a few things that seem logical to add that I’ve avoided - and there are a few that seem illogical that I have prioritized higher.  I thought I’d share a bit of what I have on my current “todo list” - and a few items that I probably will not be working on soon (and why).&lt;/p&gt;

&lt;h3 id=&quot;things-high-on-my-list&quot;&gt;Things High On My List&lt;/h3&gt;

&lt;p&gt;Twitter.  I’ve integrated a simple Twitter client into SwitchBoard, but it’s proven to be pretty unreliable.  About 30% of the time, the response from the server will come back with an error.  I hadn’t had the time or motivation to address this, but I want to move it from “Development” to “Testing” in the near future.  The use-case for this is that you could tweet your house and have it take action based on who sent it (a whitelist of who it will listen to).  Commands will likely be plain-text, similar to what Gerty accepts - including macros.  “Turn on the porch light and the hall light.”  “I’m coming home.” - these and similar commands could be a convenient way to issue commands from outside your local network.&lt;/p&gt;

&lt;p&gt;Service Workers.  Although they likely won’t be very functional, as SSL (discussed later) is required - I want to at least have the functionality built in the off-chance I can find a &lt;em&gt;reasonable&lt;/em&gt; solution to the ongoing SSL woes.&lt;/p&gt;

&lt;p&gt;Interactive Chat.  You can currently tell Gerty what you want, but you cannot query for simple data.  I’ve started some very basic work for useful bidirectional communication here.  Asking questions like “Who is home?”, “What’s the weather like?”, “Do I need a jacket?”, “What’s going on?” should yield at least some reasonable responses.&lt;/p&gt;

&lt;p&gt;Screensaver.  At one time, I had envisioned mounting an Android phone or tablet to my wall to issue house commands.  With OLED screens, a purely black display would be effectively be turning that screen “off”.  I had started - but not finished - work on a client side screensaver that, after a timeout period of inactivity, would turn the screen black.  Tapping the screen would immediately reveal the normal interface.  This should be simple and hope to finish it soon.  I just lacked the motivation since other tasks took priority and I had no immediate use for this.  I’ll also have to consider those that want the screensaver for some clients but not others (client toggle’able?).&lt;/p&gt;

&lt;h3 id=&quot;things-not-so-high-on-my-list&quot;&gt;Things Not So High On My List&lt;/h3&gt;

&lt;p&gt;Samsung TVs.  They’ve updated their protocol so my device controller will not work with newer models.  There’s a &lt;a href=&quot;https://github.com/imbrianj/switchBoard/issues/55&quot;&gt;lengthy ongoing issue&lt;/a&gt; that goes into greater detail for those interested.  TL;DR: It’s a tough problem that smarter people are working on - and I do not have access to the device.&lt;/p&gt;

&lt;p&gt;LG TVs.  I’d made some progress on this early on, but never got around the authentication.  The system itself is well documented, but requires just a bit of troubleshooting.  I don’t have access to the device which makes this testing difficult.  If anyone has interest in helping here, I’m happy to prioritize it.  Until then, I imagine it’ll stay in “Development”.&lt;/p&gt;

&lt;p&gt;SSL.  I’ve already gone into great detail about the &lt;a href=&quot;https://imbrianj.github.io/switchBoard/Developing-on-a-Moving-Target/&quot;&gt;issues with SSL on an Internet&lt;/a&gt; so I won’t rehash those bad memories.  While it’s totally doable to set up an internal certificate authority, it’s not exactly scalable for an “out of the box” system.  While I have expectation that those using SwitchBoard can edit some simple JSON files, I think setting up a cert authority is a step too far.  If I have time and patience, I’ll look into maybe documenting the easiest method to get things working.  Being that each platform may be different, it could be of limited use.&lt;/p&gt;</content><author><name></name></author><category term="general" /><category term="home automation" /><summary type="html">I’ve been trying to keep updating SwitchBoard with features and bug fixes. There are a few things that seem logical to add that I’ve avoided - and there are a few that seem illogical that I have prioritized higher. I thought I’d share a bit of what I have on my current “todo list” - and a few items that I probably will not be working on soon (and why).</summary></entry><entry><title type="html">Home Automation as an Enabler</title><link href="http://localhost:4000/switchBoard/Home-Automation-as-an-Enabler/" rel="alternate" type="text/html" title="Home Automation as an Enabler" /><published>2017-12-06T00:00:00-08:00</published><updated>2017-12-06T00:00:00-08:00</updated><id>http://localhost:4000/switchBoard/Home%20Automation%20as%20an%20Enabler</id><content type="html" xml:base="http://localhost:4000/switchBoard/Home-Automation-as-an-Enabler/">&lt;p&gt;If you’re reading this, you’re probably already sold on the benefits of home automation.  You’re also, statistically, probably not disabled.  Those with accessibility needs have the most to gain from many newer technologies.  While having a home automation system is handy when I’m too lazy to get off the couch to turn off a light or turn on the air conditioner, the cost of those interactions saved are relatively minor, they may be much more expensive - or even impossible for others.&lt;/p&gt;

&lt;p&gt;If you are bedridden, how would you adjust the temperature of your thermostat?  If you are blind, how would you ensure your living room light is off after your guests have left?  If you lack fine motor control - either through missing limbs and using an alternate input device or lack of fine control, could you imagine having difficulties in effectively use your TV remote?&lt;/p&gt;

&lt;p&gt;I’ve spent quite a bit of time trying to put myself in the shoes of people with different disabilities.  I’ve tried, to the best of my ability, to create systems that try to make their lives just a little easier.  I don’t always succeed, but I think it’s important for anyone developing systems to keep this in mind.&lt;/p&gt;

&lt;p&gt;While home automation is a neat toy that brings security, energy efficiency and convenience features, it’s a tool that could have profound impact for others.&lt;/p&gt;</content><author><name></name></author><category term="general" /><category term="home automation" /><category term="accessibility" /><summary type="html">If you’re reading this, you’re probably already sold on the benefits of home automation. You’re also, statistically, probably not disabled. Those with accessibility needs have the most to gain from many newer technologies. While having a home automation system is handy when I’m too lazy to get off the couch to turn off a light or turn on the air conditioner, the cost of those interactions saved are relatively minor, they may be much more expensive - or even impossible for others.</summary></entry><entry><title type="html">App Types</title><link href="http://localhost:4000/switchBoard/App-Types/" rel="alternate" type="text/html" title="App Types" /><published>2017-11-19T00:00:00-08:00</published><updated>2017-11-19T00:00:00-08:00</updated><id>http://localhost:4000/switchBoard/App%20Types</id><content type="html" xml:base="http://localhost:4000/switchBoard/App-Types/">&lt;p&gt;One of the most powerful features of any home automation system is the ability to trigger specific actions based on a device event that has fired.  There have been a number of custom apps built within SwitchBoard to offer some handy functionality right out of the box.  Many offer ways to simply “announce” a specific action or state.  As these may change between different devices, they’ve been made specific in use, but all share some common code.  Maybe you’d like to get an SMS when your 3d print finishes, get a desktop notification when there’s a new article posted on a blog or give a voice alert if your Travis CI build fails.  They’re all in there.&lt;/p&gt;

&lt;p&gt;Beyond those simple use-cases, other apps are made available that do more complex actions.  If you have a knock sensor and a contact sensor, the &lt;code class=&quot;highlighter-rouge&quot;&gt;doorKnock&lt;/code&gt; app can intelligently differentiate between someone knocking on a door and someone jiggling their keys before entering.  Other convenience apps can turn on your hall light when you arrive home, notify you if any specific sensors are triggered while you’re away from home (a push notification security system), trigger macros based on sun states or turn off your thermostat if a window is left open too long.&lt;/p&gt;

&lt;p&gt;So far, I’ve discussed the simple and the not-so-simple apps.  The others are much more advanced and offer additional functionality to specific devices.  Two of these examples include the &lt;code class=&quot;highlighter-rouge&quot;&gt;foscamDvr&lt;/code&gt; app which can act as a DVR recorder for the very inexpensive Foscam FI8910W wifi camera (and possibly others).  You’re able to configure it with a specific maximum space you’d like for it to make use of, whether to generate gif thumbnails and how long each video section should run.&lt;/p&gt;

&lt;p&gt;The other advanced app is Gerty.  Gerty is a device controller that makes heavy use of additional apps to compliment it’s core features.  The Gerty app is a delegated app - meaning it’s executed on any event firing of any other (specified) device on the system.  Most apps do not require this level of holistic data exposure - but Gerty is made to act based on many inputs.  You’re able to speak to Gerty and he will execute commands that are entered in plain English.  “Turn on the hall light and the office switch”, for example.  He is visually represented as an emoji - the emotional value of that emoji is dictated based on many parameters based on any incoming commands.  Gerty is also the device controller that executes machine learning commands - and logs any valuable information in a friendly “chat log”, letting you go back and see interesting events and their times.&lt;/p&gt;

&lt;p&gt;The finaly type of apps are conditional apps.  Common apps are sent the device state &lt;em&gt;after&lt;/em&gt; a command has executed.  In some instances, this is too late to be useful.  To protect my Hunter Douglas blinds from being lowered onto an opened window and causing damage, conditional apps are able to see the inputted command and, depending on the apps logic, determine that that command should be aborted - or possibly replaced by another.  For my blinds, if they are above a threshold, they will only allow you to lower them as far as is safe to do so with an open window.  If they are extended below the safe limit and the window is open, they will simply refuse to close - as this would cause serious damage.  As these actions may be helpful - they may also be confusing at first.  For this reason, they are also able to notify the user in any number of methods (voice, push notification, sms, desktop notifications, etc).  Similarly, a Nest conditional app was made to prevent your thermostat from turning on if a window is currently open, presumably wasting power.  Without this being in a conditional app, the air conditioner may come on briefly before a normal app would be able to turn it off.  Although a system being on briefly isn’t particularly wasteful of electricity, that start-up of the compressor can result in more wear.  It’s just a nice thing to do.&lt;/p&gt;

&lt;p&gt;Why build them out as apps if some of this functionality could be built into the device controllers themselves.  The simple answer is that it makes things much more portable.  Some apps don’t care what device controller calls them - making them more widely useful.  The other major reason is that device controllers should be the distillation of device interface without logic determining their specific use.  If you look at, say, the Nest device controller - it has all the code available to send commands and retrieve data - providing it to SwitchBoard in a clean and tidy object.  That’s all.  Parsers are responsible for taking that tidied data and presenting them to the UI - and apps are responsible for taking any automatic actions based on any criteria.&lt;/p&gt;</content><author><name></name></author><category term="general" /><category term="home automation" /><category term="apps" /><summary type="html">One of the most powerful features of any home automation system is the ability to trigger specific actions based on a device event that has fired. There have been a number of custom apps built within SwitchBoard to offer some handy functionality right out of the box. Many offer ways to simply “announce” a specific action or state. As these may change between different devices, they’ve been made specific in use, but all share some common code. Maybe you’d like to get an SMS when your 3d print finishes, get a desktop notification when there’s a new article posted on a blog or give a voice alert if your Travis CI build fails. They’re all in there.</summary></entry><entry><title type="html">Automation Without Expense</title><link href="http://localhost:4000/switchBoard/Automation-Without-Expense/" rel="alternate" type="text/html" title="Automation Without Expense" /><published>2017-11-13T00:00:00-08:00</published><updated>2017-11-13T00:00:00-08:00</updated><id>http://localhost:4000/switchBoard/Automation%20Without%20Expense</id><content type="html" xml:base="http://localhost:4000/switchBoard/Automation-Without-Expense/">&lt;p&gt;When I speak to people about getting into home automation, one of their first responses is that they don’t want to go through all the expense to buy smart devices.  Maybe they rent their home and don’t want the hassle of setting things up to only have to tear it out later.&lt;/p&gt;

&lt;p&gt;Wouldn’t it be nice if you could try out some automation functionality before you take the plunge on a new expensive product?  SwitchBoard was built with the idea that automation should not be expensive.  If you have a working computer, you can spend exactly $0 and still get some great functionality.  Although it was built for low-performance machines to run on their own, there’s no reason it cannot be run in the background of your current computer.  With just a running instance of SwitchBoard, there’s a chance that some of your existing products can already be used - even if they’re not thought of as particularly “smart”.  Take a look at the &lt;a href=&quot;https://github.com/imbrianj/switchBoard#supported-devicesservices&quot;&gt;Supported Devices List&lt;/a&gt; and you may spot your TV or stereo.  You may also see different services that you could get some use of.  If you care about weather, sports, news, Travis CI etc - you can grab that data and do “stuff” with it.  What that “stuff” is depends on your needs.  Your actions they trigger may be desktop notifications, text to speech, push notifications even text messages.  With those tools alone, you can build up a pretty compelling piece of functionality.&lt;/p&gt;

&lt;p&gt;I’d considered building a multi-user, Internet-based equivalent for a lot of these services so you could abstract as many non-physical IoT pseudo-devices into a single cloud service with it’s own API and interface.  Someday, maybe.&lt;/p&gt;</content><author><name></name></author><category term="home automation" /><category term="general" /><summary type="html">When I speak to people about getting into home automation, one of their first responses is that they don’t want to go through all the expense to buy smart devices. Maybe they rent their home and don’t want the hassle of setting things up to only have to tear it out later.</summary></entry><entry><title type="html">Developing on a Moving Target</title><link href="http://localhost:4000/switchBoard/Developing-on-a-Moving-Target/" rel="alternate" type="text/html" title="Developing on a Moving Target" /><published>2017-11-08T00:00:00-08:00</published><updated>2017-11-08T00:00:00-08:00</updated><id>http://localhost:4000/switchBoard/Developing%20on%20a%20Moving%20Target</id><content type="html" xml:base="http://localhost:4000/switchBoard/Developing-on-a-Moving-Target/">&lt;p&gt;Sometimes, maintaining a complex piece of code that relies on third parties for code dependencies, APIs or software support can come with some significant risks and disadvantages.  Some of these can be mitigated while others must be either addressed or abandoned.&lt;/p&gt;

&lt;p&gt;From the start, SwitchBoard was built with the intention of having the fewest number of dependencies as reasonably possible.  The non-developer dependencies are limited to only &lt;a href=&quot;https://david-dm.org/imbrianj/switchboard#info=dependencies&quot;&gt;three core packages&lt;/a&gt;.  I intentionally peg these to very specific versions so I can have very granular control over their updates and make sure they work.  This is more a product of my OCD - but with so few, it’s not much of a burden for a repository that I work on so often.&lt;/p&gt;

&lt;p&gt;While npm packages are not a point of major pain, third party APIs sometimes are.  One example is the now intermittent Stocks API.  It’s fed from a YQL query that comes from Yahoo Finance.  One day, the feed started acting erratic.  I narrowed it down a bit to clearly be tied to some caching issues.  If the feed has interruption, you could simply append an additional stock and it would work again…for a while.  At the time, I worked at Yahoo, so I had the luxury of contacting the team responsible for the API.  Since the API itself was not official, they were unable to offer any type of official support for it.  So I’ve sort of let it rot.  It does work on occasion and I still use it myself - with some minor success.  Finding a working API is either not possible (licensing fees making it unable to scale for an open source project) or terribly hacky and brittle (parsing the HTML page for the values desired).&lt;/p&gt;

&lt;p&gt;Devices themselves have the great luxury of being shipped in great numbers.  My Samsung TV likely will not have any changes to it’s API.  This means for as long as I own the TV, I should expect (to some reasonable degree) that I’ll be able to make use of it with SwitchBoard.  However, Samsung took steps in later models to alter how they manage HTTP commands to be sent.  And this (evidentially) includes some encryption.  This &lt;a href=&quot;https://github.com/imbrianj/switchBoard/issues/55&quot;&gt;still remains unaddressed&lt;/a&gt;.  Not having physical access to the hardware makes development very difficult.  While some people have volunteered to help, it’s a difficult thing to do, even with hands-on access.  Admittedly, I’ve been stalling a bit in the hopes that someone can reveal additional information about how the new system works so that I can leverage their learnings.&lt;/p&gt;

&lt;p&gt;And finally is Chrome.  I love Chrome.  It has a ton of great functionality, it’s very modern and a pleasure to work with.  Mostly.  The Chrome team has (rightfully) started adding a lot of security features surrounding trusted sites.  One caveat to all this is that if you have a site that does not have SSL, some features will be disabled.  But these rules of trusting a site do not appear to be uniformly applied.  If you have no SSL, voice recognition will not work.  If you have a self-signed certificate, it will.  If you have no SSL, appcaching will work.  If you have a self-signed certificate, it will not.  Most people might ask why I don’t simply get a non-self-signed SSL certificate and be done with all this.  Since SwitchBoard is meant to be run on an intranet, it - to my knowledge - cannot be served any SSL certificate from an authorized signing authority.  Instead, you must rely on one that is not trusted - and either use it as an untrusted certificate or go to each machine and register that cert as being trusted.&lt;/p&gt;

&lt;p&gt;Okay, so you go through the trouble to finally get your system to use a self-signed SSL certificate.  You’ve gone to each machine on your network to register that cert so they know to trust it.  But now SmartThings no longer reports state back to SwitchBoard.  That’s because the &lt;a href=&quot;https://github.com/imbrianj/oauth_controller/blob/master/oauth_controller.groovy&quot;&gt;associated SmartThings app&lt;/a&gt; uses &lt;code class=&quot;highlighter-rouge&quot;&gt;sendHubCommand&lt;/code&gt; to send any state changes from the hub directly.  This keeps your network safer by not having to punch a hole through your firewall in order to get his bidirectional communication.  It’s also faster.  It’s just a better experience, in general.  But &lt;code class=&quot;highlighter-rouge&quot;&gt;sendHubCommand&lt;/code&gt;, to my knowledge, is a very simple system and &lt;a href=&quot;https://community.smartthings.com/t/sendhubcommand-to-https-endpoint/99297&quot;&gt;incapable of dealing with SSL&lt;/a&gt;.  So once you’re using SSL, those state updates are no longer received.  Bum out.&lt;/p&gt;</content><author><name></name></author><category term="home automation" /><category term="general" /><summary type="html">Sometimes, maintaining a complex piece of code that relies on third parties for code dependencies, APIs or software support can come with some significant risks and disadvantages. Some of these can be mitigated while others must be either addressed or abandoned.</summary></entry><entry><title type="html">Machine (Slowly) Learning</title><link href="http://localhost:4000/switchBoard/Machine-(Slowly)-Learning/" rel="alternate" type="text/html" title="Machine (Slowly) Learning" /><published>2017-11-07T00:00:00-08:00</published><updated>2017-11-07T00:00:00-08:00</updated><id>http://localhost:4000/switchBoard/Machine%20(Slowly)%20Learning</id><content type="html" xml:base="http://localhost:4000/switchBoard/Machine-(Slowly)-Learning/">&lt;p&gt;Is this thing on?&lt;/p&gt;

&lt;p&gt;When I first started adding machine learning to SwitchBoard, I had the expectation that it’d start revealing some interesting usage patterns.  That it’d start taking over a bit and let me stop focusing on how I interacted with my house.  It seemed natural to think that if it had a reasonable sized data set that it’d be able to take the user out of the equation at least somewhat.&lt;/p&gt;

&lt;p&gt;I was right.  And…well, I was also wrong.  So far, the end result has been pretty underwhelming.  Early on, I did not consider time or day variables.  Any action would be mapped to all similar actions.  To add some more fidelity to those results, I created sub-categories that events would be categorized by.  There would be four time variables: dawn, morning, afternoon and evening.  There would also be two day variables: weekday and weekend.  This is all well and good.  My behaviors change drastically between weekend evenings and, say, weekday mornings.  What I had naively not expected was how insanely high this set the bar on how much useful data one would need to collect before a reasonable level of confidence could surmise some useful responses.  We went from one bucket full of random events into &lt;code class=&quot;highlighter-rouge&quot;&gt;4 x 2 = 8&lt;/code&gt; buckets of events.  Some of these will be more full than others (I’m far more active in the afternoon than, say, dawn).  Because of this, I’ve been tweaking my confidence (how certain are we that, given the existing data, you want an intended action to be carried out?) and threshold numbers (how many events like this need to be logged before we should even consider acting on them?) down considerably to try and find where that happy level of usefulness is.&lt;/p&gt;

&lt;p&gt;Then there’s the issue of redundant scripts.  My house has learned that I like to have my hall light on after I arrive home.  But I already have written a script to enforce this - since I want it to do this before any learned behavior.  Why wait for 100 iterations when it’s something you automatically know will be desired 100% of the time?  So scriptable events still have their place - and they take over a fair bit of the work that machine learning otherwise would eventually handle.&lt;/p&gt;

&lt;p&gt;And then there’s the issue of redundant commands.  My house knows that when the motion sensor goes off during the day that my office light is on 95% of the time - so it should turn it on for me.  However, since the light is on 95% of the time, there’s a low likelihood that there’s anything to do at all.  Code has been written to prevent initiating an intent if the desired value is already the current state.  So it’s completely ignored.  So the machine learning reinforces existing behaviors and doesn’t leave a lot for it to do.  It silently dismisses an accurate but redundant intent.&lt;/p&gt;

&lt;p&gt;To further reduce any disagreements between a user and the machine learning script, any device that has had their state change within a given period will not be acted upon by any machine learning intent.  If you enter a room, switch on a light, then trigger an action that may want that light turned off, it may be fair to assume that we should ignore that implied intent since your action was presumably explicit.&lt;/p&gt;

&lt;p&gt;Things had been so quiet that I had to start adding logging data to my instance of SwitchBoard.  Watching the log as events fired, I could see it accurately reporting that either not enough data had been collected (something I can adjust numbers for and wait for more data to be collected), the confidence in that action was not high enough (which I can adjust - to a limit) or the target device already matched the intent.&lt;/p&gt;

&lt;p&gt;I still see huge potential in machine learning in this space.  My setup is, admittedly, fairly simple - and I still have only collected about a month of useful data.  I’ll be interested to see where things go once I collect more data, add in more functionality and find confidence and threshold values that make sense.  As this plays out, I intend to keep this blog updated.&lt;/p&gt;</content><author><name></name></author><category term="home automation" /><category term="machine learning" /><summary type="html">Is this thing on?</summary></entry></feed>